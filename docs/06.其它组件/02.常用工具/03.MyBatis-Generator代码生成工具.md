---
title: MyBatis-Generator代码生成工具
date: 2024-04-05 16:44:19
permalink: /pages/108880/
categories:
  - 其它组件
  - 常用工具
tags:
  - 
author: 
  name: zyg
  link: https://github.com/zyg525
---



## 一、概述

　　`MyBatis-Generator`是MyBatis的代码生成器，可以根据数据库生成model、mapper.xml、mapper接口和Example，通常情况下的单表查询不用再手写mapper。

## 二、使用步骤

　　1、添加`MyBatis-Generator`依赖

```xml
<dependency>
    <groupId>org.mybatis.generator</groupId>
    <artifactId>mybatis-generator-core</artifactId>
    <version>1.3.7</version>
</dependency>
```

　　2、创建`mybatis-generator-config.xml`配置文件

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!-- MyBatis-Generator 相关配置 -->
<!DOCTYPE generatorConfiguration
        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd">

<!-- 所有的配置均在根元素 generatorConfiguration下，元素的顺序必须和下面一致 -->
<generatorConfiguration>
    <!-- 可以引入外部配置，比如JDBC的相关配置信息 -->
    <properties resource="generator.properties"/>

    <!-- context标签用于运行时的解析模式和具体的代码生成行为 -->
    <context id="mySqlContext" targetRuntime="MyBatis3" defaultModelType="flat">
        <property name="javaFileEncoding" value="UTF-8"/>

        <!-- 让生成的实体类实现Serializable接口并且添加serialVersionUID属性 -->
        <plugin type="org.mybatis.generator.plugins.SerializablePlugin"/>
        <!-- 让生成的实体类拥有toString方法 -->
        <plugin type="org.mybatis.generator.plugins.ToStringPlugin"/>
        <plugin type="org.mybatis.generator.plugins.UnmergeableXmlMappersPlugin" />

        <!-- 配置JDBC连接信息 -->
        <jdbcConnection driverClass="${jdbc.driverClass}"
                        connectionURL="${jdbc.connectionURL}"
                        userId="${jdbc.userId}"
                        password="${jdbc.password}">
            <!-- 解决mysql驱动升级到8.0后不生成指定数据库代码的问题 -->
            <property name="nullCatalogMeansCurrent" value="true" />
        </jdbcConnection>

        <!-- 指定生成实体类的路径，包括封装查询参数的实体类和封装返回结果的实体类 -->
        <javaModelGenerator targetPackage="com.zyg.model" targetProject="src\main\java\"/>
        <!-- 指定生成Mapper.xml文件的路径 -->
        <sqlMapGenerator targetPackage="com.zyg.mapper" targetProject="src\main\resources\" />
        <!-- 指定生成Mapper接口的路径 -->
        <javaClientGenerator type="XMLMAPPER" targetPackage="com.zyg.mapper" targetProject="src\main\java\" />

        <!-- 为数据库中所有表生成代码 -->
        <table tableName="%">
            <!-- id是主键，当插入数据后返回生成的主键 -->
            <generatedKey column="id" sqlStatement="MySql" identity="true"/>
        </table>
    </context>
</generatorConfiguration>
```

　　3、运行main方法生成代码

```java
public class Generator {
    public static void main(String[] args) throws Exception {
        // MBG 执行过程中的警告信息
        List<String> warnings = new ArrayList<String>();
        // 当生成的代码重复时，覆盖原代码
        boolean overwrite = true;
        // 读取我们的 MBG 配置文件
        InputStream is = Generator.class.getResourceAsStream("/mybatis-generator-config.xml");
        ConfigurationParser cp = new ConfigurationParser(warnings);
        Configuration config = cp.parseConfiguration(is);
        is.close();

        DefaultShellCallback callback = new DefaultShellCallback(overwrite);
        //创建 MBG
        MyBatisGenerator myBatisGenerator = new MyBatisGenerator(config, callback, warnings);
        //执行生成代码
        myBatisGenerator.generate(null);
        //输出警告信息
        for (String warning : warnings) {
            System.out.println(warning);
        }
    }
}
```


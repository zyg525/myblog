---
title: lombok插件
date: 2024-04-05 12:04:15
permalink: /pages/c2b221/
categories:
  - 其它组件
  - 常用工具
tags:
  - 
author: 
  name: zyg
  link: https://github.com/zyg525
---



## 一、简介

　　Lombok 是一种 Java 实用工具，可用来帮助开发人员消除 Java 的冗长，尤其是对于简单的 Java 对象（POJO）。它通过注释实现这一目的。

　　使用Lombok的步骤是：

　　1、IDEA安装Lombok插件，并重启IDEA

　　2、添加依赖

```xml
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <version>1.18.32</version>
    <scope>provided</scope>
</dependency>
```

　　3、在类上添加注解。

## 二、常用注解

### @Getter、@Setter

　　作用范围：类、字段。

　　`@Getter`：给每个字段添加`getter`方法。

　　`@Setter`：给每个字段添加`setter`方法。

### @NonNull

　　作用范围：类、字段、方法参数。

　　作用在字段上和方法参数上时：

```java
public class Person {
    @NonNull
    @Setter
    private String name;
    
    public void test(@NonNull String msg) {
    }
}
```

　　编译后是：

```java
public class Person {
    private @NonNull String name;

    public Person() {
    }

    public void test(@NonNull String msg) {
        if (msg == null) {
            throw new NullPointerException("msg is marked non-null but is null");
        }
    }

    public void setName(final @NonNull String name) {
        if (name == null) {
            throw new NullPointerException("name is marked non-null but is null");
        } else {
            this.name = name;
        }
    }
}
```

### @ToString

　　作用范围：类上。

　　作用是给类生成`toString()`方法。

### @EqualsAndHashCode

　　作用范围：类上。

　　作用是给类生成`equals()`方法和`hashCode()`方法。在`equals()`方法中，使用字段本身的`equals()`方法进行比较。

### @Data

　　作用范围：类上。

　　作用等于`@Getter`、`@Setter`、`@ToString`、`@EqualsAndHashCode`之和。

### @Cleanup

　　作用范围：局部变量上。

　　作用是确保局部变量在退出当前作用域时被及时清理掉。比如：

```java
public void test() {
    try {
        @Cleanup FileInputStream inputStream = new FileInputStream("./");
    }catch (Exception e) {
        e.printStackTrace();
    }
}
```

　　编译后是：

```java
public void test() {
    try {
        FileInputStream inputStream = new FileInputStream("./");
        if (Collections.singletonList(inputStream).get(0) != null) {
            inputStream.close();
        }
    } catch (Exception var2) {
        var2.printStackTrace();
    }
}
```

### @Log4j

　　作用范围：类上。

　　作用是给类生成一个`Logger log`字段，前提是必须导入`Log4j`的依赖。比如：

```java
@Log4j
public class Person {
}
```

　　编译后是：

```java
public class Person {
    private static final Logger log = Logger.getLogger(Person.class);
}
```

　　和它类似的注解还有`@Log`,`@Log4j2`, `@Slf4j`, `@JBossLog` 等

### @Value

　　作用范围：类上。

　　作用是生成包含所有参数的一个构造方法(会覆盖掉无参构造方法)，同时为所有字段生成`getter()`方法、`equals()`方法、`hashCode()`方法、`toString()`方法，还会将所有字段变成`final`类型，并且不提供任何修改字段的方法。**因此`@Value`的真正作用是创建不可变类。**

### 构造方法相关注解

　　作用范围：类上。

　　`@AllArgsConstructor`：提供包含全部参数的一个构造方法，但是会覆盖掉无参构造方法。

　　`@NoArgsConstructor`：提供无参构造方法。

　　`@RequiredArgsConstructor`：使用标注了`@NonNull`的全部字段生成一个构造方法，会覆盖掉无参构造方法。也可以不使用`@NonNull`，而是把字段变成`final`类型，效果是一样的。

### @Builder

　　作用范围：类、方法、构造方法上。

　　Builder 设计模式是一种**创建型设计模式**，主要解决了一些对象的构造过程中的问题。它提供了一种链式方法来创建一个复杂的对象。在构建复杂对象或者需要多个参数来构造对象的情况下，Builder 模式是一个非常有用的设计模式。然而，手动实现 Builder 模式可能会变得极其繁琐。幸运的是，Lombok 提供了一个非常强大的工具——`@Builder` 注解，可以帮助我们自动生成 builder 代码。

　　例如：

```java
@Builder
public class Person {
    public Integer id;

    private String name;

    private Integer age;
}
```

　　编译后是：

```java
package com.zyg.model;

public class Person {
    public Integer id;
    private String name;
    private Integer age;

    Person(final Integer id, final String name, final Integer age) {
        this.id = id;
        this.name = name;
        this.age = age;
    }

    public static PersonBuilder builder() {
        return new PersonBuilder();
    }

    public static class PersonBuilder {
        private Integer id;
        private String name;
        private Integer age;

        PersonBuilder() {
        }

        public PersonBuilder id(final Integer id) {
            this.id = id;
            return this;
        }

        public PersonBuilder name(final String name) {
            this.name = name;
            return this;
        }

        public PersonBuilder age(final Integer age) {
            this.age = age;
            return this;
        }

        public Person build() {
            return new Person(this.id, this.name, this.age);
        }

        public String toString() {
            return "Person.PersonBuilder(id=" + this.id + ", name=" + this.name + ", age=" + this.age + ")";
        }
    }
}
```

　　使用Builder设计模式创建对象：

```java
Person jack = Person.builder()
        .id(1)
        .name("jack")
        .age(18)
    	.build();
```


---
title: nginx部署前后端分离项目的步骤
date: 2024-05-11 09:14:30
permalink: /pages/0e0348/
categories:
  - 前端
  - nginx
tags:
  - 
author: 
  name: zyg
  link: https://github.com/zyg525
---


## 一、创建一个简单的vue前端项目

　　步骤：

　　1、安装最新版`nodejs`环境。浏览器是`JavaScript`在客户端的运行环境，`nodejs`是`JavaScript`在服务端的运行环境，`npm`是`nodejs`的依赖管理器。

　　2、创建一个`vue3`应用

```shell
npm create vue@latest
```

　　3、进入应用根目录，安装依赖并启动应用

```shell
cd <your-project-name>
npm install
npm run dev
```

## 二、修改vue应用主页并打包

　　步骤：

　　1、创建主页文件`/myProject/src/views/index.html`

```vue
<script setup>
defineProps({
  msg: {
    type: String,
    required: true
  }
})
</script>

<template>
  <div class="greetings">
    <h3>
      后端地址：
      <a href="login" target="_blank">登录8080</a>
      <a href="login" target="_blank">登录8081</a>
      <a href="login" target="_blank">登录8082</a>
    </h3>
  </div>
</template>

<style scoped>
h1 {
  font-weight: 500;
  font-size: 2.6rem;
  position: relative;
  top: -10px;
}

h3 {
  font-size: 1.2rem;
}

.greetings h1,
.greetings h3 {
  text-align: center;
}

@media (min-width: 1024px) {
  .greetings h1,
  .greetings h3 {
    text-align: left;
  }
}
</style>
```

　　2、在`/myProject/src/router/index.js`中设置主页

```js
import { createRouter, createWebHistory } from 'vue-router'
import HomeView from '../views/HomeView.vue'
import index from '../views/index.vue'

const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes: [
    {
      path: '/',
      name: 'index',
      component: index
    },
  ]
})

export default router
```

## 三、安装nginx（Centos7.6）

　　步骤：

　　1、安装编译工具及库文件

```shell
yum -y install make zlib zlib-devel gcc-c++ libtool  openssl openssl-devel
```

　　2、安装 PCRE，PCRE 作用是让 Nginx 支持 Rewrite 功能。下载 PCRE 安装包，下载地址： http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz，下载完成后解压安装包：

```shell
tar zxvf pcre-8.35.tar.gz
```

　　进入安装包目录，编译安装PCRE：

```shell
cd pcre-8.35
./configure
make && make install
```

　　查看pcre版本：

```shell
pcre-config --version
```

　　3、安装nginx。nginx下载地址：https://nginx.org/en/download.html，下载完成后解压：

```shell
tar zxvf nginx-1.6.2.tar.gz
```

　　进入安装包目录，编译安装nginx：

```shell
cd nginx-1.6.2
./configure --prefix=/mydata/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/mydata/pcre-8.35
make
make install
```

　　查看nginx版本：

```shell
/mydata/nginx/sbin/nginx -v
```

　　4、nginx的两个常用命令：

```shell
cd /mydata/nginx/sbin/nginx
./nginx #启动nginx
./nginx -s reload #重启nginx
```

## 四、在nginx上部署vue应用

　　步骤：

　　1、打包vue应用到`dist`目录

```shell
npm run build
```

　　2、将`dist`目录移动到nginx根目录下

　　3、修改nginx的配置文件`/mydata/nginx/conf/nginx.conf`

```conf
 server
  {
    listen 80; #监听端口
    server_name 192.168.220.128; #域名
	location / { #设置主页路径
		root /mydata/nginx/dist;
		index index.html;
		try_files $uri $uri/ /index.html;
    }
		
	location  ~* \.(gif|jpg|jpeg|png|bmp|swf|css|js)$ { #设置静态文件路径
		root /mydata/nginx/dist/;
	}
	
	location /login/ { #设置反向代理
		root /mydata/nginx/dist/;
		proxy_pass http://192.168.220.128:8080;
	}
	
    access_log off;
  }
```




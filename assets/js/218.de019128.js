(window.webpackJsonp=window.webpackJsonp||[]).push([[218],{562:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("学习不走弯路，"),t("a",{attrs:{href:"#%E5%85%AC%E4%BC%97%E5%8F%B7"}},[s._v("关注公众号")]),s._v(" 回复「学习路线」，获取mall项目专属学习路线！")]),s._v(" "),t("h1",{attrs:{id:"mongodb快速入门-掌握这些刚刚好"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongodb快速入门-掌握这些刚刚好"}},[s._v("#")]),s._v(" MongoDB快速入门，掌握这些刚刚好！")]),s._v(" "),t("blockquote",[t("p",[s._v("虽说现在关系型数据库还是主流，但是面对某些需求的时候，需要非关系型数据库来补充它，学习一个主流的NoSQL数据库还是很有必要的。MongoDB是一个功能丰富的NoSQL数据库，本文整理了它最常用的部分形成了这篇入门教程，希望对大家有所帮助。")])]),s._v(" "),t("h2",{attrs:{id:"简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),t("p",[s._v("MongoDB是一个基于分布式文件存储的数据库。由C++语言编写，旨在为WEB应用提供可扩展的高性能数据存储解决方案。MongoDB是一个介于关系型数据库和非关系型数据库之间的产品，是非关系型数据库当中功能最丰富，最像关系型数据库的。")]),s._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("blockquote",[t("p",[s._v("以前写的MongoDB安装教程是基于3.2版本的，发现有的朋友使用新版本安装有问题，这次我们使用最新版本再来安装一次，本文所使用的MongoDB版本为4.2.5，总的来说，新版本的安装更简单了。")])]),s._v(" "),t("h3",{attrs:{id:"windows下的安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows下的安装"}},[s._v("#")]),s._v(" Windows下的安装")]),s._v(" "),t("ul",[t("li",[s._v("下载MongoDB安装包，选择"),t("code",[s._v("Windows x64")]),s._v("版本安装，下载地址：https://www.mongodb.com/download-center/community")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/mall/mongodb_start_01.png",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("运行MongoDB安装包并选择自定义安装，设置好安装路径；")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/mall/mongodb_start_02.png",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("配置MongoDB，让MongoDB作为服务运行，并配置好数据目录和日志目录；")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/mall/mongodb_start_03.png",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("取消MongoDB Compass的安装选项（不取消安装极慢），需要可自行安装；")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/mall/mongodb_start_04.png",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("双击"),t("code",[s._v("mongo.exe")]),s._v("可以运行MongoDB自带客户端，操作MongoDB；")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/mall/mongodb_start_05.png",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("连接成功后会显示如下信息；")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/mall/mongodb_start_06.png",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("如果需要移除MongoDB服务，只需使用管理员权限运行"),t("code",[s._v("cmd")]),s._v("工具，并输入如下命令。")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("sc.exe delete MongoDB\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"linux下的安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux下的安装"}},[s._v("#")]),s._v(" Linux下的安装")]),s._v(" "),t("ul",[t("li",[s._v("下载MongoDB的Docker镜像；")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull mongo:4.2.5\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("使用Docker命令启动MongoDB服务；")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(":27017 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" mongo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /mydata/mongo/db:/data/db "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" mongo:4.2.5\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("有时候我们需要为MongoDB设置账号，可以使用如下命令启动；")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(":27017 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" mongo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /mydata/mongo/db:/data/db "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" mongo:4.2.5 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--auth")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("然后我们需要进入容器中的MongoDB客户端；")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" mongo mongo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("之后在"),t("code",[s._v("admin")]),s._v("集合中创建一个账号用于连接，这里创建的是基于"),t("code",[s._v("root")]),s._v("角色的超级管理员帐号；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("use admin\ndb.createUser({ \n    user: 'mongoadmin', \n    pwd: 'secret', \n    roles: [ { role: \"root\", db: \"admin\" } ] });\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("创建完成后验证是否可以登录；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('db.auth("mongoadmin","secret")\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("整个账号创建过程可以参考下图。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/mall/mongodb_start_11.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"客户端工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#客户端工具"}},[s._v("#")]),s._v(" 客户端工具")]),s._v(" "),t("blockquote",[t("p",[s._v("MongoDB的客户端工具有很多，上面没安装的MongoDB Compass就是其中之一，另外Navicat 15版本也有MongoDB的管理功能。这里我们使用的是一款免费的客户端工具Robo 3T（以前叫Robomongo）。")])]),s._v(" "),t("ul",[t("li",[s._v("首先下载客户端工具，下载地址：https://robomongo.org/download")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/mall/mongodb_start_07.png",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("下载完成后解压，双击"),t("code",[s._v("robo3t.exe")]),s._v("即可使用；")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/mall/mongodb_start_08.png",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("之后创建一个到MongoDB的连接；")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/mall/mongodb_start_09.png",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("创建连接成功以后，就可以操作MongoDB了。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/mall/mongodb_start_10.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"相关概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#相关概念"}},[s._v("#")]),s._v(" 相关概念")]),s._v(" "),t("blockquote",[t("p",[s._v("MongoDB是非关系型数据库当中最像关系型数据库的，所以我们通过它与关系型数据库的对比，来了解下它的概念。")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[s._v("SQL概念")]),s._v(" "),t("th",{staticStyle:{"text-align":"left"}},[s._v("MongoDB概念")]),s._v(" "),t("th",{staticStyle:{"text-align":"left"}},[s._v("解释/说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("database")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("database")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("数据库")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("table")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("collection")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("数据库表/集合")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("row")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("document")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("数据记录行/文档")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("column")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("field")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("数据字段/域")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("index")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("index")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("索引")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("primary key")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("primary key")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("主键,MongoDB自动将_id字段设置为主键")])])])]),s._v(" "),t("h2",{attrs:{id:"数据库操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库操作"}},[s._v("#")]),s._v(" 数据库操作")]),s._v(" "),t("ul",[t("li",[s._v("创建数据库，使用"),t("code",[s._v("use")]),s._v("命令去创建数据库，当插入第一条数据时会创建数据库，例如创建一个"),t("code",[s._v("test")]),s._v("数据库；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('> use test\nswitched to db test\n> db.article.insert({name:"MongoDB 教程"})\nWriteResult({ "nInserted" : 1 })\n> show dbs\nadmin   0.000GB\nconfig  0.000GB\nlocal   0.000GB\ntest    0.000GB\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ul",[t("li",[s._v("删除数据库，使用db对象中的"),t("code",[s._v("dropDatabase()")]),s._v("方法来删除；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('> db.dropDatabase()\n{ "dropped" : "test", "ok" : 1 }\n> show dbs\nadmin   0.000GB\nconfig  0.000GB\nlocal   0.000GB\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"集合操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集合操作"}},[s._v("#")]),s._v(" 集合操作")]),s._v(" "),t("ul",[t("li",[s._v("创建集合，使用db对象中的"),t("code",[s._v("createCollection()")]),s._v("方法来创建集合，例如创建一个"),t("code",[s._v("article")]),s._v("集合；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('> use test\nswitched to db test\n> db.createCollection("article")\n{ "ok" : 1 }\n> show collections\narticle\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ul",[t("li",[s._v("删除集合，使用collection对象的"),t("code",[s._v("drop()")]),s._v("方法来删除集合，例如删除一个"),t("code",[s._v("article")]),s._v("集合；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("> db.article.drop()\ntrue\n> show collections\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"文档操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文档操作"}},[s._v("#")]),s._v(" 文档操作")]),s._v(" "),t("blockquote",[t("p",[s._v("上面的数据库和集合操作是在MongoDB的客户端中进行的，下面的文档操作都是在Robomongo中进行的。")])]),s._v(" "),t("h3",{attrs:{id:"插入文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插入文档"}},[s._v("#")]),s._v(" 插入文档")]),s._v(" "),t("ul",[t("li",[s._v("MongoDB通过collection对象的"),t("code",[s._v("insert()")]),s._v("方法向集合中插入文档，语法如下；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.collection.insert(document)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("使用collection对象的"),t("code",[s._v("insert()")]),s._v("方法来插入文档，例如插入一个"),t("code",[s._v("article")]),s._v("文档；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.article.insert({title: 'MongoDB 教程', \n    description: 'MongoDB 是一个 Nosql 数据库',\n    by: 'Andy',\n    url: 'https://www.mongodb.com/',\n    tags: ['mongodb', 'database', 'NoSQL'],\n    likes: 100\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[s._v("使用collection对象的"),t("code",[s._v("find()")]),s._v("方法可以获取文档，例如获取所有的"),t("code",[s._v("article")]),s._v("文档；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.article.find({})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('{\n    "_id" : ObjectId("5e9943661379a112845e4056"),\n    "title" : "MongoDB 教程",\n    "description" : "MongoDB 是一个 Nosql 数据库",\n    "by" : "Andy",\n    "url" : "https://www.mongodb.com/",\n    "tags" : [ \n        "mongodb", \n        "database", \n        "NoSQL"\n    ],\n    "likes" : 100.0\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"更新文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更新文档"}},[s._v("#")]),s._v(" 更新文档")]),s._v(" "),t("ul",[t("li",[s._v("MongoDB通过collection对象的"),t("code",[s._v("update()")]),s._v("来更新集合中的文档，语法如下；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.collection.update(\n   <query>,\n   <update>,\n   {\n     multi: <boolean>\n   }\n)\n# query：修改的查询条件，类似于SQL中的WHERE部分\n# update：更新属性的操作符，类似与SQL中的SET部分\n# multi：设置为true时会更新所有符合条件的文档，默认为false只更新找到的第一条\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("ul",[t("li",[s._v("将title为"),t("code",[s._v("MongoDB 教程")]),s._v("的所有文档的title修改为"),t("code",[s._v("MongoDB")]),s._v("；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.article.update({'title':'MongoDB 教程'},{$set:{'title':'MongoDB'}},{multi:true})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("除了"),t("code",[s._v("update()")]),s._v("方法以外，"),t("code",[s._v("save()")]),s._v("方法可以用来替换已有文档，语法如下；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.collection.save(document)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("这次我们将ObjectId为"),t("code",[s._v("5e9943661379a112845e4056")]),s._v("的文档的title改为"),t("code",[s._v("MongoDB 教程")]),s._v("；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('db.article.save({\n    "_id" : ObjectId("5e9943661379a112845e4056"),\n    "title" : "MongoDB 教程",\n    "description" : "MongoDB 是一个 Nosql 数据库",\n    "by" : "Andy",\n    "url" : "https://www.mongodb.com/",\n    "tags" : [ \n        "mongodb", \n        "database", \n        "NoSQL"\n    ],\n    "likes" : 100.0\n})\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"删除文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除文档"}},[s._v("#")]),s._v(" 删除文档")]),s._v(" "),t("ul",[t("li",[s._v("MongoDB通过collection对象的"),t("code",[s._v("remove()")]),s._v("方法来删除集合中的文档，语法如下；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.collection.remove(\n   <query>,\n   {\n     justOne: <boolean>\n   }\n)\n# query：删除的查询条件，类似于SQL中的WHERE部分\n# justOne：设置为true只删除一条记录，默认为false删除所有记录\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ul",[t("li",[s._v("删除title为"),t("code",[s._v("MongoDB 教程")]),s._v("的所有文档；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.article.remove({'title':'MongoDB 教程'})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"查询文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询文档"}},[s._v("#")]),s._v(" 查询文档")]),s._v(" "),t("ul",[t("li",[s._v("MongoDB通过collection对象的"),t("code",[s._v("find()")]),s._v("方法来查询文档，语法如下；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.collection.find(query, projection)\n# query：查询条件，类似于SQL中的WHERE部分\n# projection：可选，使用投影操作符指定返回的键\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("查询"),t("code",[s._v("article")]),s._v("集合中的所有文档；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.article.find()\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('/* 1 */\n{\n    "_id" : ObjectId("5e994dcb1379a112845e4057"),\n    "title" : "MongoDB 教程",\n    "description" : "MongoDB 是一个 Nosql 数据库",\n    "by" : "Andy",\n    "url" : "https://www.mongodb.com/",\n    "tags" : [ \n        "mongodb", \n        "database", \n        "NoSQL"\n    ],\n    "likes" : 50.0\n}\n\n/* 2 */\n{\n    "_id" : ObjectId("5e994df51379a112845e4058"),\n    "title" : "Elasticsearch 教程",\n    "description" : "Elasticsearch 是一个搜索引擎",\n    "by" : "Ruby",\n    "url" : "https://www.elastic.co/cn/",\n    "tags" : [ \n        "elasticearch", \n        "database", \n        "NoSQL"\n    ],\n    "likes" : 100.0\n}\n\n/* 3 */\n{\n    "_id" : ObjectId("5e994e111379a112845e4059"),\n    "title" : "Redis 教程",\n    "description" : "Redis 是一个key-value数据库",\n    "by" : "Andy",\n    "url" : "https://redis.io/",\n    "tags" : [ \n        "redis", \n        "database", \n        "NoSQL"\n    ],\n    "likes" : 150.0\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br")])]),t("ul",[t("li",[s._v("MongoDB中的条件操作符，通过与SQL语句的对比来了解下；")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[s._v("操作")]),s._v(" "),t("th",{staticStyle:{"text-align":"left"}},[s._v("格式")]),s._v(" "),t("th",{staticStyle:{"text-align":"left"}},[s._v("SQL中的类似语句")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("等于")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("{<key>:<value>}")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("where title = 'MongoDB 教程'")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("小于")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("{<key>:{$lt:<value>}}")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("where likes < 50")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("小于或等于")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("{<key>:{$lte:<value>}}")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("where likes <= 50")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("大于")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("{<key>:{$gt:<value>}}")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("where likes > 50")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("大于或等于")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("{<key>:{$gte:<value>}}")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("where likes >= 50")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("不等于")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("{<key>:{$ne:<value>}}")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("where likes != 50")])])])])]),s._v(" "),t("ul",[t("li",[s._v("条件查询，查询title为"),t("code",[s._v("MongoDB 教程")]),s._v("的所有文档；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.article.find({'title':'MongoDB 教程'})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("条件查询，查询likes大于50的所有文档；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.article.find({'likes':{$gt:50}})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("AND条件可以通过在"),t("code",[s._v("find()")]),s._v("方法传入多个键，以逗号隔开来实现，例如查询title为"),t("code",[s._v("MongoDB 教程")]),s._v("并且by为"),t("code",[s._v("Andy")]),s._v("的所有文档；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.article.find({'title':'MongoDB 教程','by':'Andy'})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("OR条件可以通过使用"),t("code",[s._v("$or")]),s._v("操作符实现，例如查询title为"),t("code",[s._v("Redis 教程")]),s._v("或"),t("code",[s._v("MongoDB 教程")]),s._v("的所有文档；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('db.article.find({$or:[{"title":"Redis 教程"},{"title": "MongoDB 教程"}]})\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("AND 和 OR条件的联合使用，例如查询likes大于50，并且title为"),t("code",[s._v("Redis 教程")]),s._v("或者"),t("code",[s._v('"MongoDB 教程')]),s._v("的所有文档。")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('db.article.find({"likes": {$gt:50}, $or: [{"title": "Redis 教程"},{"title": "MongoDB 教程"}]})\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"其他操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他操作"}},[s._v("#")]),s._v(" 其他操作")]),s._v(" "),t("h3",{attrs:{id:"limit与skip操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#limit与skip操作"}},[s._v("#")]),s._v(" Limit与Skip操作")]),s._v(" "),t("ul",[t("li",[s._v("读取指定数量的文档，可以使用"),t("code",[s._v("limit()")]),s._v("方法，语法如下；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.collection.find().limit(NUMBER)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("只查询article集合中的2条数据；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.article.find().limit(2)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("跳过指定数量的文档来读取，可以使用"),t("code",[s._v("skip()")]),s._v("方法，语法如下；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.collection.find().limit(NUMBER).skip(NUMBER)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("从第二条开始，查询article集合中的2条数据；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.article.find().limit(2).skip(1)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"排序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#排序"}},[s._v("#")]),s._v(" 排序")]),s._v(" "),t("ul",[t("li",[s._v("在MongoDB中使用"),t("code",[s._v("sort()")]),s._v("方法对数据进行排序，"),t("code",[s._v("sort()")]),s._v("方法通过参数来指定排序的字段，并使用1和-1来指定排序方式，1为升序，-1为降序；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.collection.find().sort({KEY:1})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("按article集合中文档的likes字段降序排列；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.article.find().sort({likes:-1})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引"}},[s._v("#")]),s._v(" 索引")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("索引通常能够极大的提高查询的效率，如果没有索引，MongoDB在读取数据时必须扫描集合中的每个文件并选取那些符合查询条件的记录。")])]),s._v(" "),t("li",[t("p",[s._v("MongoDB使用"),t("code",[s._v("createIndex()")]),s._v("方法来创建索引，语法如下；")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.collection.createIndex(keys, options)\n# background：建索引过程会阻塞其它数据库操作，设置为true表示后台创建，默认为false\n# unique：设置为true表示创建唯一索引\n# name：指定索引名称，如果没有指定会自动生成\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("给title和description字段创建索引，1表示升序索引，-1表示降序索引，指定以后台方式创建；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('db.article.createIndex({"title":1,"description":-1}, {background: true})\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("查看article集合中已经创建的索引；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.article.getIndexes()\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('/* 1 */\n[\n    {\n        "v" : 2,\n        "key" : {\n            "_id" : 1\n        },\n        "name" : "_id_",\n        "ns" : "test.article"\n    },\n    {\n        "v" : 2,\n        "key" : {\n            "title" : 1.0,\n            "description" : -1.0\n        },\n        "name" : "title_1_description_-1",\n        "ns" : "test.article",\n        "background" : true\n    }\n]\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("h3",{attrs:{id:"聚合"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#聚合"}},[s._v("#")]),s._v(" 聚合")]),s._v(" "),t("ul",[t("li",[s._v("MongoDB中的聚合使用"),t("code",[s._v("aggregate()")]),s._v("方法，类似于SQL中的group by语句，语法如下；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("db.collection.aggregate(AGGREGATE_OPERATION)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("聚合中常用操作符如下；")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[s._v("操作符")]),s._v(" "),t("th",{staticStyle:{"text-align":"left"}},[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("$sum")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("计算总和")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("$avg")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("计算平均值")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("$min")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("计算最小值")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[s._v("$max")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("计算最大值")])])])]),s._v(" "),t("ul",[t("li",[s._v("根据by字段聚合文档并计算文档数量，类似与SQL中的count()函数；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('db.article.aggregate([{$group : {_id : "$by", sum_count : {$sum : 1}}}])\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('/* 1 */\n{\n    "_id" : "Andy",\n    "sum_count" : 2.0\n}\n\n/* 2 */\n{\n    "_id" : "Ruby",\n    "sum_count" : 1.0\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("ul",[t("li",[s._v("根据by字段聚合文档并计算likes字段的平局值，类似与SQL中的avg()语句；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('db.article.aggregate([{$group : {_id : "$by", avg_likes : {$avg : "$likes"}}}])\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('/* 1 */\n{\n    "_id" : "Andy",\n    "avg_likes" : 100.0\n}\n\n/* 2 */\n{\n    "_id" : "Ruby",\n    "avg_likes" : 100.0\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"正则表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#正则表达式"}},[s._v("#")]),s._v(" 正则表达式")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("MongoDB使用"),t("code",[s._v("$regex")]),s._v("操作符来设置匹配字符串的正则表达式，可以用来模糊查询，类似于SQL中的like操作；")])]),s._v(" "),t("li",[t("p",[s._v("例如查询title中包含"),t("code",[s._v("教程")]),s._v("的文档；")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('db.article.find({title:{$regex:"教程"}})\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("不区分大小写的模糊查询，使用"),t("code",[s._v("$options")]),s._v("操作符；")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('db.article.find({title:{$regex:"elasticsearch",$options:"$i"}})\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"结合springboot使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#结合springboot使用"}},[s._v("#")]),s._v(" 结合SpringBoot使用")]),s._v(" "),t("p",[s._v("具体参考："),t("a",{attrs:{href:"https://mp.weixin.qq.com/s/YZUnpp3QRHGKyuvN7UnWNw",target:"_blank",rel:"noopener noreferrer"}},[s._v("《mall整合Mongodb实现文档操作》"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"公众号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#公众号"}},[s._v("#")]),s._v(" 公众号")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com/mall/banner/qrcode_for_macrozheng_258.jpg",alt:"公众号图片"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);
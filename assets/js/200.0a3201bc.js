(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{544:function(a,s,t){"use strict";t.r(s);var e=t(4),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("学习不走弯路，"),s("a",{attrs:{href:"#%E5%85%AC%E4%BC%97%E5%8F%B7"}},[a._v("关注公众号")]),a._v(" 回复「学习路线」，获取mall项目专属学习路线！")]),a._v(" "),s("h1",{attrs:{id:"面对成百上千台服务器产生的日志-试试这款轻量级日志搬运神器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#面对成百上千台服务器产生的日志-试试这款轻量级日志搬运神器"}},[a._v("#")]),a._v(" 面对成百上千台服务器产生的日志，试试这款轻量级日志搬运神器！")]),a._v(" "),s("blockquote",[s("p",[a._v("之前我们搭建的ELK日志收集系统，主要是用来收集SpringBoot应用的日志。其原理是应用通过Logstash插件，使用TCP向Logstash传输日志，从而存储到Elasticsearch中去。但是有很多中间件的日志都是直接存储在文件中的，比如"),s("code",[a._v("Nginx")]),a._v("、"),s("code",[a._v("Elasticsearch")]),a._v("和"),s("code",[a._v("MySQL")]),a._v("，此时我们就需要一个搬运工来把日志搬到Elasticsearch中去，Filebeat正是这样一个日志搬运工，本文将详细介绍它的使用方法，希望对大家有所帮助。")])]),a._v(" "),s("h2",{attrs:{id:"filebeat简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filebeat简介"}},[a._v("#")]),a._v(" Filebeat简介")]),a._v(" "),s("p",[a._v("Filebeat是一款轻量级日志采集器，可用于转发和汇总日志与文件。Filebeat内置有多种模块（Nginx、MySQL、Redis、Elasticsearch、Logstash等），可针对常见格式的日志大大简化收集、解析和可视化过程，只需一条命令即可。")]),a._v(" "),s("h2",{attrs:{id:"filebeat安装及配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filebeat安装及配置"}},[a._v("#")]),a._v(" Filebeat安装及配置")]),a._v(" "),s("blockquote",[s("p",[a._v("安装Filebeat之前，我们需要先安装好Elasticsearch和Kibana，具体参考"),s("a",{attrs:{href:"https://mp.weixin.qq.com/s/8nUunL02Y5AfXTCscYg54w",target:"_blank",rel:"noopener noreferrer"}},[a._v("《你居然还去服务器上捞日志，搭个日志收集系统难道不香么！》"),s("OutboundLink")],1),a._v("，注意使用7.6.2版本。")])]),a._v(" "),s("ul",[s("li",[a._v("我们先下载Filebeat的安装包，下载地址：https://www.elastic.co/cn/downloads/past-releases/filebeat-7-6-2")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_01.png",alt:""}})]),a._v(" "),s("ul",[s("li",[a._v("下载完成后解压到指定目录，注意图中所示的三个地方；")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_02.png",alt:""}})]),a._v(" "),s("ul",[s("li",[a._v("Kibana中早就提供好了Filebeat收集各种日志的教程，我们先进入首页，访问地址：http://localhost:5601/app/kibana#/home")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_03.png",alt:""}})]),a._v(" "),s("ul",[s("li",[a._v("点击"),s("code",[a._v("Add log data")]),a._v("按钮，可以发现支持的中间件还是很丰富的，涵盖了常用的；")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_04.png",alt:""}})]),a._v(" "),s("ul",[s("li",[a._v("点开Nginx的日志收集教程看下，是不是很详细；")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_05.png",alt:""}})]),a._v(" "),s("ul",[s("li",[a._v("接下来我们就要开始配置Filebeat了，配置好Elasticsearch和Kibana的连接地址，修改Filebeat的安装目录下的配置文件"),s("code",[a._v("filebeat.yml")]),a._v("即可，修改内容如下。")])]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("output.elasticsearch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("hosts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"localhost:9200"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("setup.kibana")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("host")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"localhost:5601"')]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h2",{attrs:{id:"收集nginx日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#收集nginx日志"}},[a._v("#")]),a._v(" 收集Nginx日志")]),a._v(" "),s("blockquote",[s("p",[a._v("我们先拿Nginx来练练手，体验下Filebeat的日志收集功能吧。")])]),a._v(" "),s("ul",[s("li",[a._v("使用如下命令开启Filebeat的Nginx日志收集模块；")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("filebeat modules "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" nginx\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("开启完成后，进入"),s("code",[a._v("modules.d")]),a._v("目录下，你会发现"),s("code",[a._v("nginx.yml")]),a._v("的"),s("code",[a._v("disable")]),a._v("后缀没有了，说明已经被开启；")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_06.png",alt:""}})]),a._v(" "),s("ul",[s("li",[a._v("接下来修改"),s("code",[a._v("nginx.yml")]),a._v("文件，配置好Nginx的"),s("code",[a._v("access")]),a._v("和"),s("code",[a._v("error")]),a._v("日志路径；")])]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Module: nginx")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Docs: https://www.elastic.co/guide/en/beats/filebeat/7.6/filebeat-module-nginx.html")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" nginx\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("access")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("var.paths")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"I:/developer/env/nginx-1.8.1/logs/access.log"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("var.paths")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"I:/developer/env/nginx-1.8.1/logs/error.log"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br")])]),s("ul",[s("li",[a._v("由于启用了Nginx日志收集模块，我们需要通过如下命令对Filebeat进行设置；")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("filebeat setup\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_07.png",alt:""}})]),a._v(" "),s("ul",[s("li",[a._v("通过如下命令启动Filebeat服务；")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("filebeat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("我们可以通过之前使用的Kibana中的Nginx教程页面，检查下数据是否成功被收集了；")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_08.png",alt:""}})]),a._v(" "),s("ul",[s("li",[a._v("点击"),s("code",[a._v("Nginx logs dashboard")]),a._v("按钮可以查看收集到的Nginx日志，先看看概览日志；")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_09.png",alt:""}})]),a._v(" "),s("ul",[s("li",[a._v("再看看详细日志，从此不用再去服务器上捞Nginx日志了！")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_10.png",alt:""}})]),a._v(" "),s("h2",{attrs:{id:"收集elasticsearch日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#收集elasticsearch日志"}},[a._v("#")]),a._v(" 收集Elasticsearch日志")]),a._v(" "),s("blockquote",[s("p",[a._v("接下来我们再试试收集Elasticsearch的日志。")])]),a._v(" "),s("ul",[s("li",[a._v("使用如下命令开启Filebeat的Elasticsearch日志收集模块；")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("filebeat modules "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" elasticsearch\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("接下来修改"),s("code",[a._v("elasticsearch.yml")]),a._v("配置，配置好Elasticsearch的日志路径；")])]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Module: elasticsearch")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Docs: https://www.elastic.co/guide/en/beats/filebeat/7.6/filebeat-module-elasticsearch.html")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" elasticsearch\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("var.paths")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"I:/developer/env/elasticsearch-7.6.2/logs/elasticsearch.log"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("slowlog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("var.paths")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"I:/developer/env/elasticsearch-7.6.2/logs/elasticsearch_index_indexing_slowlog.log"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"I:/developer/env/elasticsearch-7.6.2/logs/elasticsearch_index_search_slowlog.log"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("deprecation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("var.paths")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"I:/developer/env/elasticsearch-7.6.2/logs/elasticsearch_deprecation.log"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br")])]),s("ul",[s("li",[a._v("设置并启动Filebeat服务；")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("filebeat setup\nfilebeat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("ul",[s("li",[a._v("在"),s("code",[a._v("Discover")]),a._v("页面中查看Elasticsearch日志。")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_11.png",alt:""}})]),a._v(" "),s("h2",{attrs:{id:"收集mysql日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#收集mysql日志"}},[a._v("#")]),a._v(" 收集MySQL日志")]),a._v(" "),s("blockquote",[s("p",[a._v("再来试试收集MySQL的日志。")])]),a._v(" "),s("ul",[s("li",[a._v("使用如下命令开启Filebeat的MySQL日志收集模块；")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("filebeat modules "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" mysql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("接下来修改"),s("code",[a._v("mysql.yml")]),a._v("配置，配置好MySQL的日志路径，主要是错误日志和慢查询日志；")])]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Module: mysql")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Docs: https://www.elastic.co/guide/en/beats/filebeat/7.6/filebeat-module-mysql.html")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" mysql\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("var.paths")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"C:/ProgramData/MySQL/MySQL Server 5.7/Data/DESKTOP-5NIMJ19.err"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("slowlog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("var.paths")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"C:/ProgramData/MySQL/MySQL Server 5.7/Data/DESKTOP-5NIMJ19-slow.log"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br")])]),s("ul",[s("li",[a._v("设置并启动Filebeat服务；")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("filebeat setup\nfilebeat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("ul",[s("li",[a._v("点击"),s("code",[a._v("MySQL logs dashboard")]),a._v("按钮可以查看收集到的MySQL日志；")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_12.png",alt:""}})]),a._v(" "),s("ul",[s("li",[a._v("查看MySQL收集到的日志详情。")])]),a._v(" "),s("p",[s("img",{attrs:{src:"/img/mall/filebeat_start_13.png",alt:""}})]),a._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" 总结")]),a._v(" "),s("p",[a._v("本文主要介绍了使用Filebeat去收集Nginx、Elasticsearch和MySQL的文件日志，其他中间件的日志收集用法也基本相同，用Filebeat收集中间件日志是不是方便！")]),a._v(" "),s("h2",{attrs:{id:"公众号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#公众号"}},[a._v("#")]),a._v(" 公众号")]),a._v(" "),s("p",[s("img",{attrs:{src:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com/mall/banner/qrcode_for_macrozheng_258.jpg",alt:"公众号图片"}})])])}),[],!1,null,null,null);s.default=n.exports}}]);
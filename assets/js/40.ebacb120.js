(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{365:function(s,a,t){s.exports=t.p+"assets/img/image-20240923220433424-1727100283148-1.f54b5b50.png"},452:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("虚拟机版本是"),a("code",[s._v("VMware Workstation 17 pro")]),s._v("，Linux版本是"),a("code",[s._v("Centos7.6")]),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"一、网络重启报错问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、网络重启报错问题"}},[s._v("#")]),s._v(" 一、网络重启报错问题")]),s._v(" "),a("p",[s._v("当使用"),a("code",[s._v("systemctl restart network")]),s._v("重启网络时，报错"),a("code",[s._v("Failed to start LSB: Bring")]),s._v("。")]),s._v(" "),a("p",[s._v("解决办法：禁用NetworkManager")]),s._v(" "),a("p",[s._v("1、"),a("code",[s._v("systemctl stop NetworkManager")])]),s._v(" "),a("p",[s._v("2、"),a("code",[s._v("systemctl disable NetworkManager")])]),s._v(" "),a("p",[s._v("3、重启网络，"),a("code",[s._v("systemctl restart network")])]),s._v(" "),a("h2",{attrs:{id:"二、新建虚拟机的网络配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、新建虚拟机的网络配置"}},[s._v("#")]),s._v(" 二、新建虚拟机的网络配置")]),s._v(" "),a("p",[s._v("Linux安装好之后，配置网络的步骤是：")]),s._v(" "),a("p",[s._v("1、修改"),a("code",[s._v("/etc/sysconfig/network-scripts/ifcfg-ens33")]),s._v("文件，添加或修改下面内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BOOTPROTO")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"static"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用静态IP")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ONBOOT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IPADDR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".220.31 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义的IP地址，注意网段要和NAT模式下的网卡保持一致")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETMASK")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 子网掩码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GATEWAY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".220.2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 网关")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DNS1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.8")]),s._v(".8.8 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# DNS")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DNS2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.8")]),s._v(".4.4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("2、重启网络")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl restart network\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("3、虚拟机会通过一个虚拟网卡和主机相连，例如"),a("code",[s._v("VMnet8")]),s._v("。在主机中修改"),a("code",[s._v("VMnet8")]),s._v("的IP为"),a("code",[s._v("192.168.220.1")]),s._v("，即虚拟机同网段的第一个号码；"),a("code",[s._v("VMnet8")]),s._v("的子网掩码和网关与虚拟机保持一致。如图所示：")]),s._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:t(365),alt:"image-20240923220433424",align:"center"}}),s._v(" "),a("h2",{attrs:{id:"三、为虚拟机创建全局代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、为虚拟机创建全局代理"}},[s._v("#")]),s._v(" 三、为虚拟机创建全局代理")]),s._v(" "),a("p",[s._v("1、修改"),a("code",[s._v("/etc/profile")]),s._v("文件，在文件末尾添加下面内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("http_proxy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://192.168.0.104:37546 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 192.168.0.104是主机IP，37546是VPN软件的端口")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("https_proxy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://192.168.0.104:37546\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ftp_proxy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://192.168.0.104:37546\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("no_proxy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1,localhost\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("2、执行命令使修改生效")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("3、验证是否生效")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" www.google.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("注意，这种方式虽然被称为全局代理，但是并不能代理所有通信，比如Docker。")])]),s._v(" "),a("h2",{attrs:{id:"四、为docker创建代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、为docker创建代理"}},[s._v("#")]),s._v(" 四、为Docker创建代理")]),s._v(" "),a("p",[s._v("为Docker创建代理的目的是方便拉取镜像，因为国内镜像无法使用，只能拉取国外镜像。")]),s._v(" "),a("p",[s._v("1、创建文件夹")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /etc/systemd/system/docker.service.d/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("2、在这个文件夹内创建文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" http-proxy.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("3、编辑"),a("code",[s._v("http-proxy.conf")]),s._v("文件，配置代理，文件内容是")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Environment")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HTTP_PROXY=http://192.168.0.104:37546/"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Environment")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HTTPS_PROXY=http://192.168.0.104:37546/"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Environment")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NO_PROXY=localhost,127.0.0.1,.example.com"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("4、刷新配置并重启服务")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl daemon-reload\nsystemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);
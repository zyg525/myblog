(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{431:function(e,v,t){"use strict";t.r(v);var a=t(4),_=Object(a.a)({},(function(){var e=this,v=e._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h2",{attrs:{id:"一、安装redis"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、安装redis"}},[e._v("#")]),e._v(" 一、安装Redis")]),e._v(" "),v("h3",{attrs:{id:"使用docker安装redis"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#使用docker安装redis"}},[e._v("#")]),e._v(" 使用Docker安装Redis")]),e._v(" "),v("p",[e._v("1、拉取镜像")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" pull redis:7\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("p",[e._v("2、创建并运行redis容器")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("6379")]),e._v(":6379 "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--name")]),e._v(" redis "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-v")]),e._v(" /mydata/redis/data:/data "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--restart")]),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("always "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-d")]),e._v(" redis:7 redis-server\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br")])]),v("p",[e._v("3、使用redis客户端连接服务端")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exec")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-it")]),e._v(" redis redis-cli\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("h3",{attrs:{id:"加载配置文件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#加载配置文件"}},[e._v("#")]),e._v(" 加载配置文件")]),e._v(" "),v("p",[e._v("1、下载"),v("a",{attrs:{href:"https://download.redis.io/redis-stable/redis.conf",target:"_blank",rel:"noopener noreferrer"}},[v("code",[e._v("redis.conf")]),e._v("配置文件"),v("OutboundLink")],1)]),e._v(" "),v("p",[e._v("2、通过配置文件启动redis容器")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("6379")]),e._v(":6379 "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--name")]),e._v(" redis "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-v")]),e._v(" /mydata/redis/data:/data "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-v")]),e._v(" /mydata/redis/config/redis.conf:/config/redis.conf "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--restart")]),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("always "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-d")]),e._v(" redis:7 redis-server /config/redis.conf\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br"),v("span",{staticClass:"line-number"},[e._v("5")]),v("br")])]),v("p",[e._v("3、启动Redis后，可能无法进行远程连接，这时需要修改一下配置文件，注释掉"),v("code",[e._v("bind 127.0.0.1")]),e._v("，并修改"),v("code",[e._v("protected-mode yes")]),e._v("为"),v("code",[e._v("protected-mode no")]),e._v("，然后重启redis容器")]),e._v(" "),v("div",{staticClass:"language-conf line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("# bind 127.0.0.1\nprotected-mode no\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br")])]),v("h2",{attrs:{id:"二、redis的数据类型"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、redis的数据类型"}},[e._v("#")]),e._v(" 二、Redis的数据类型")]),e._v(" "),v("h3",{attrs:{id:"key"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#key"}},[e._v("#")]),e._v(" key")]),e._v(" "),v("p",[e._v("Redis使用"),v("code",[e._v("key-value")]),e._v("存储数据，"),v("code",[e._v("key")]),e._v("一般是字符串类型，"),v("code",[e._v("value")]),e._v("包含以下多种类型："),v("code",[e._v("string")]),e._v("、"),v("code",[e._v("list")]),e._v("、"),v("code",[e._v("hash")]),e._v("、"),v("code",[e._v("set")]),e._v("、"),v("code",[e._v("zset")]),e._v("等。"),v("strong",[e._v("在一个Redis数据库中")]),e._v("，"),v("code",[e._v("key")]),v("strong",[e._v("是唯一的")]),e._v("。关于"),v("code",[e._v("key")]),e._v("的一些命令如下表所示：")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th",[e._v("关于key的命令")]),e._v(" "),v("th",[e._v("介绍")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[v("code",[e._v("SET key value")])]),e._v(" "),v("td",[e._v("创建或更新一个"),v("code",[e._v("key-value")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("GET key")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("key")]),e._v("对应的"),v("code",[e._v("value")]),e._v("值")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("EXISTS key")])]),e._v(" "),v("td",[e._v("判断"),v("code",[e._v("key")]),e._v("是否存在，如果存在返回"),v("code",[e._v("1")]),e._v("，不存在返回"),v("code",[e._v("0")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("KEYS key*")])]),e._v(" "),v("td",[e._v("查询所有符合正则表达式的"),v("code",[e._v("key")]),e._v("的名字")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("RENAME key newkey")])]),e._v(" "),v("td",[e._v("修改"),v("code",[e._v("key")]),e._v("的名字")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("DEL key")])]),e._v(" "),v("td",[e._v("删除"),v("code",[e._v("key-value")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("EXPIRE key 60")])]),e._v(" "),v("td",[e._v("设置"),v("code",[e._v("key-value")]),e._v("的过期时间，单位是秒")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("TTL key")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("key-value")]),e._v("剩余的过期时间，单位是秒。如果已经过期返回"),v("code",[e._v("-2")]),e._v("，如果永不过期返回"),v("code",[e._v("-1")])])])])]),e._v(" "),v("blockquote",[v("p",[e._v('info "提示"')]),e._v(" "),v("p",[e._v("虽然"),v("code",[e._v("value")]),e._v("包含多种类型，但这些类型内部的元素类型只能是字符串、整数或浮点数，比如"),v("code",[e._v("list")]),e._v("只能存储字符串、整数或浮点数类型的元素，这一点和Java语言是不同的。")])]),e._v(" "),v("h3",{attrs:{id:"string类型"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#string类型"}},[e._v("#")]),e._v(" string类型")]),e._v(" "),v("p",[v("code",[e._v("string")]),e._v("是最简单的一种"),v("code",[e._v("value")]),e._v("类型，关于它的一些命令如下表所示：")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th",[e._v("关于string类型value的命令")]),e._v(" "),v("th",[e._v("介绍")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[v("code",[e._v("SET key value")])]),e._v(" "),v("td",[e._v("创建或更新一个"),v("code",[e._v("key-value")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("MSET key1 value1 key2 value2 key3 value3")])]),e._v(" "),v("td",[e._v("批量创建或更新"),v("code",[e._v("key-value")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("GET key")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("key")]),e._v("对应的"),v("code",[e._v("value")]),e._v("值")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("MGET key1 key2 key3")])]),e._v(" "),v("td",[e._v("批量查询"),v("code",[e._v("key")]),e._v("对应的"),v("code",[e._v("value")]),e._v("值")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("GETSET key newvalue")])]),e._v(" "),v("td",[e._v("更新"),v("code",[e._v("key")]),e._v("对应的"),v("code",[e._v("value")]),e._v("值，并返回旧的"),v("code",[e._v("value")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("STRLEN key")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("key")]),e._v("对应的"),v("code",[e._v("value")]),e._v("所占用的字节数")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("GETRANGE key 0 1")])]),e._v(" "),v("td",[e._v("截取"),v("code",[e._v("key")]),e._v("对应的"),v("code",[e._v("value")]),e._v("中的"),v("code",[e._v("[0, 1]")]),e._v("之间的字符，"),v("code",[e._v("0")]),e._v("代表第一个字符，"),v("code",[e._v("-1")]),e._v("代表最后一个字符，"),v("code",[e._v("-2")]),e._v("代表倒数第二个字符")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("SETRANGE key 0 str")])]),e._v(" "),v("td",[e._v("使用指定的字符串"),v("code",[e._v("str")]),e._v("，替换"),v("code",[e._v("value")]),e._v("中从"),v("code",[e._v("0")]),e._v("开始的子串")])])])]),e._v(" "),v("h3",{attrs:{id:"list类型"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#list类型"}},[e._v("#")]),e._v(" list类型")]),e._v(" "),v("p",[v("code",[e._v("list")]),e._v("有点像Java中的"),v("code",[e._v("LinkedList")]),e._v("，它既可以作为一个数组，也可以作为一个双端队列，也可以作为一个阻塞队列。关于它的一些命令如下表所示：")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th",[e._v("关于list类型value的命令")]),e._v(" "),v("th",[e._v("介绍")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[v("code",[e._v("LPUSH key value1 value2 value3")])]),e._v(" "),v("td",[e._v("从队列左边添加元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("RPUSH key value1 value2 value3")])]),e._v(" "),v("td",[e._v("从队列右边添加元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("LINSERT key BEFORE/AFTER value newvalue")])]),e._v(" "),v("td",[e._v("从队列左边开始，找到第一个值为"),v("code",[e._v("value")]),e._v("的元素，在它的前面/后面插入"),v("code",[e._v("newvalue")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("LRANGE key 0 -1")])]),e._v(" "),v("td",[e._v("从队列左边开始，查询队列指定索引范围内的"),v("code",[e._v("value")]),e._v("，"),v("code",[e._v("0")]),e._v("代表第一个元素，"),v("code",[e._v("-1")]),e._v("代表最后一个元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("LINDEX key 0")])]),e._v(" "),v("td",[e._v("从队列左边开始，查询队列指定索引处的"),v("code",[e._v("value")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("LPOP key")])]),e._v(" "),v("td",[e._v("从队列左边弹出第一个元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("RPOP key")])]),e._v(" "),v("td",[e._v("从队列右边弹出第一个元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("BLPOP key 60")])]),e._v(" "),v("td",[e._v("从队列左边弹出第一个元素，如果队列为空则进入阻塞状态，直到队列不为空，或者超过等待时间，单位是秒")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("BRPOP key 60")])]),e._v(" "),v("td",[e._v("从队列右边弹出第一个元素，如果队列为空则进入阻塞状态，直到队列不为空，或者超过等待时间，单位是秒")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("LSET key 0 newvalue")])]),e._v(" "),v("td",[e._v("从队列左边开始，更新指定索引处的"),v("code",[e._v("value")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("LREM key 2 value")])]),e._v(" "),v("td",[e._v("从队列左边开始，删除n个与"),v("code",[e._v("value")]),e._v("相同的元素，n是0代表有多少删除多少")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("LLEN key")])]),e._v(" "),v("td",[e._v("查询队列长度")])])])]),e._v(" "),v("h3",{attrs:{id:"hash类型"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#hash类型"}},[e._v("#")]),e._v(" hash类型")]),e._v(" "),v("p",[v("code",[e._v("hash")]),e._v("类似于Java中的"),v("code",[e._v("HashMap")]),e._v("，它的"),v("code",[e._v("k")]),e._v("是不能重复的，并且"),v("code",[e._v("k-v")]),e._v("对之间是无序的，关于它的一些命令如下表所示：")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th",[e._v("关于hash类型value的命令")]),e._v(" "),v("th",[e._v("介绍")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[v("code",[e._v("HSET key k1 v1 k2 v2 k3 v3")])]),e._v(" "),v("td",[e._v("向"),v("code",[e._v("hash")]),e._v("中添加或修改"),v("code",[e._v("k-v")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("HGET key k1")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("hash")]),e._v("中某个"),v("code",[e._v("k")]),e._v("对应的"),v("code",[e._v("v")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("HMGET key k1 k2 k3")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("hash")]),e._v("中多个"),v("code",[e._v("k")]),e._v("对应的"),v("code",[e._v("v")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("HKEYS key")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("hash")]),e._v("中的所有"),v("code",[e._v("k")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("HVALS key")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("hash")]),e._v("中的所有"),v("code",[e._v("v")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("HGETALL key")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("hash")]),e._v("中的所有"),v("code",[e._v("k-v")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("HEXISTS key k1")])]),e._v(" "),v("td",[e._v("判断"),v("code",[e._v("hash")]),e._v("中是否存在"),v("code",[e._v("k1")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("HLEN key")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("hash")]),e._v("中"),v("code",[e._v("k-v")]),e._v("的数量")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("HDEL key k1 k2")])]),e._v(" "),v("td",[e._v("删除"),v("code",[e._v("hash")]),e._v("中指定的"),v("code",[e._v("k")])])])])]),e._v(" "),v("h3",{attrs:{id:"set类型"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#set类型"}},[e._v("#")]),e._v(" set类型")]),e._v(" "),v("p",[v("code",[e._v("set")]),e._v("类似于Java中的"),v("code",[e._v("HashSet")]),e._v("，它的元素是不能重复的，关于它的一些命令如下表所示：")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th",[e._v("关于set类型value的命令")]),e._v(" "),v("th",[e._v("介绍")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[v("code",[e._v("SADD key k1 k2 k3")])]),e._v(" "),v("td",[e._v("向"),v("code",[e._v("set")]),e._v("中添加元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("SMEMBERS key")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("set")]),e._v("中的所有元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("SISMEMBER key k1")])]),e._v(" "),v("td",[e._v("判断"),v("code",[e._v("set")]),e._v("中是否存在指定元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("SCARD key")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("set")]),e._v("中元素的个数")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("SREM key k1")])]),e._v(" "),v("td",[e._v("删除"),v("code",[e._v("set")]),e._v("中指定的元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("SDIFF key1 key2")])]),e._v(" "),v("td",[e._v("查询两个"),v("code",[e._v("set")]),e._v("之间的差集，即"),v("code",[e._v("key1")]),e._v("中有，但"),v("code",[e._v("key2")]),e._v("中没有的元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("SINTER key1 key2")])]),e._v(" "),v("td",[e._v("查询两个"),v("code",[e._v("set")]),e._v("之间的交集，即"),v("code",[e._v("key1")]),e._v("和"),v("code",[e._v("key2")]),e._v("中都有的元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("SUNION key1 key2")])]),e._v(" "),v("td",[e._v("查询两个"),v("code",[e._v("set")]),e._v("之间的并集，即"),v("code",[e._v("key1")]),e._v("和"),v("code",[e._v("key2")]),e._v("中全部的元素")])])])]),e._v(" "),v("h3",{attrs:{id:"zset类型"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#zset类型"}},[e._v("#")]),e._v(" zset类型")]),e._v(" "),v("p",[v("code",[e._v("zset")]),e._v("类似于Java中的"),v("code",[e._v("TreeSet")]),e._v("，它里面的元素是不能重复的，并且是有序的。但和"),v("code",[e._v("TreeSet")]),e._v("不同的是，"),v("code",[e._v("zset")]),e._v("元素的排序是通过和元素关联的一个"),v("code",[e._v("double")]),e._v("类型的分数实现的，分数越小越靠前，关于它的一些命令如下表所示：")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th",[e._v("关于zset类型value的命令")]),e._v(" "),v("th",[e._v("介绍")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[v("code",[e._v("ZADD key 1.2 k1 1.3 k2 0.9 k3")])]),e._v(" "),v("td",[e._v("向"),v("code",[e._v("zset")]),e._v("中添加元素，同时为每个元素绑定一个分数，作为排序的依据")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("ZRANGE key 0 -1")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("set")]),e._v("中指定索引范围内的元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("ZRANGEBYSCORE key 1.1 1.8")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("set")]),e._v("中指定分数范围内的元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("ZCARD key")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("set")]),e._v("中元素的个数")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("ZREM key k1 k2")])]),e._v(" "),v("td",[e._v("删除"),v("code",[e._v("set")]),e._v("中的指定元素")])])])]),e._v(" "),v("h3",{attrs:{id:"其它类型"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#其它类型"}},[e._v("#")]),e._v(" 其它类型")]),e._v(" "),v("ul",[v("li",[v("h4",{attrs:{id:"hyperloglog基数统计"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#hyperloglog基数统计"}},[e._v("#")]),e._v(" HyperLoglog基数统计")])])]),e._v(" "),v("p",[v("code",[e._v("HyperLoglog")]),e._v("是"),v("code",[e._v("Redis-2.8.9")]),e._v("中新增的数据类型，"),v("code",[e._v("HyperLoglog")]),e._v("类型用于估计不重复元素的个数(基数)，误差率是"),v("code",[e._v("0.81%")]),e._v("，适用于对精度要求不是很高的大批量统计。关于它的一些命令如下表所示：")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th",[e._v("关于HyperLoglog的命令")]),e._v(" "),v("th",[e._v("介绍")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[v("code",[e._v("PFADD key v1 v2 v3")])]),e._v(" "),v("td",[e._v("向"),v("code",[e._v("HyperLoglog")]),e._v("中添加元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("PFCOUNT key")])]),e._v(" "),v("td",[e._v("查询"),v("code",[e._v("HyperLoglog")]),e._v("中不重复元素的个数(估计值)")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("PFMERGE key1 key2 key3")])]),e._v(" "),v("td",[e._v("合并多个"),v("code",[e._v("HyperLoglog")])])])])]),e._v(" "),v("ul",[v("li",[v("h4",{attrs:{id:"geo地理位置"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#geo地理位置"}},[e._v("#")]),e._v(" GEO地理位置")])])]),e._v(" "),v("p",[v("code",[e._v("GEO")]),e._v("是"),v("code",[e._v("Redis-3.2")]),e._v("中新增的数据类型，它是一个集合，用来存放地理位置，底层用"),v("code",[e._v("zset")]),e._v("实现。"),v("code",[e._v("GEO")]),e._v("中的地名相当于"),v("code",[e._v("zset")]),e._v("中的元素值，经纬度相当于元素对应的分数。关于它的一些命令如下表所示：")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th",[e._v("关于GEO的命令")]),e._v(" "),v("th",[e._v("介绍")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[v("code",[e._v("GEOADD city 116.20 39.56 beijing 120.52 30.40 shanghai")])]),e._v(" "),v("td",[e._v("向"),v("code",[e._v("GEO")]),e._v("集合中添加地理位置")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("ZREM city beijing")])]),e._v(" "),v("td",[e._v("删除"),v("code",[e._v("GEO")]),e._v("集合中的地理位置")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("GEODIST city beijing shanghai M/KM/FT/MI")])]),e._v(" "),v("td",[e._v("计算两个地点的距离，"),v("code",[e._v("M/KM/FT/MI")]),e._v("代表距离单位"),v("code",[e._v("米/千米/英尺/英里")])])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("GEORADIUS city beijing 1500 KM WITHCOORD WITHDIST")])]),e._v(" "),v("td",[e._v("以某个地点或某个经纬度为中心，查询某个半径内的所有地点")])])])]),e._v(" "),v("h2",{attrs:{id:"三、布隆过滤器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三、布隆过滤器"}},[e._v("#")]),e._v(" 三、布隆过滤器")]),e._v(" "),v("ul",[v("li",[v("h4",{attrs:{id:"原理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[e._v("#")]),e._v(" 原理")])])]),e._v(" "),v("p",[e._v("布隆过滤器是"),v("code",[e._v("Redis-4.0")]),e._v("版本提供的新功能，它的作用是可以判断过滤器中是否存在某个元素。布隆过滤器的原理是，当一个元素被加入集合时，通过K个散列函数将这个元素映射成一个位数组中的K个点，把它们置为1。检索时，我们只要看看这些点是不是都是1就（大约）知道集合中有没有它了：如果这些点有任何一个0，则被检元素一定不在；如果都是1，则被检元素很可能在。这就是布隆过滤器的基本思想。布隆过滤器不能删除元素。")]),e._v(" "),v("ul",[v("li",[v("h4",{attrs:{id:"误判率"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#误判率"}},[e._v("#")]),e._v(" 误判率")])])]),e._v(" "),v("p",[e._v("由于可能会发生哈希碰撞，因此布隆过滤器的统计结果可能会出现误差，幸运的是，布隆过滤器有一个可预测的误判率（FPP）：")]),e._v(" "),v("img",{staticStyle:{zoom:"80%"},attrs:{src:"/myblog/img/java/布隆过滤器的误判率公式.png",alt:"布隆过滤器的误判率公式"}}),e._v(" "),v("p",[v("code",[e._v("n")]),e._v("代表已经添加元素的个数，"),v("code",[e._v("k")]),e._v("代表散列函数的个数，"),v("code",[e._v("m")]),e._v("代表布隆过滤器的总长度。可以看出，当布隆过滤器中的元素越多、散列函数的个数越多、过滤器的总长度越短，则误判的概率越高。极端情况下，当布隆过滤器已满时(即哈希表中的每一位都是1)，无论再添加什么元素，布隆过滤器都会判断该元素已存在。")]),e._v(" "),v("p",[e._v("为了让误判率低一点，需要调整布隆过滤器的长度、散列函数的个数、添加元素的个数。我们通过上面的公式可以反推出下面的公式：")]),e._v(" "),v("img",{staticStyle:{zoom:"80%"},attrs:{src:"/myblog/img/java/布隆过滤器参数的计算方法.png",alt:"布隆过滤器参数的计算方法"}}),e._v(" "),v("ul",[v("li",[v("h4",{attrs:{id:"使用布隆过滤器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#使用布隆过滤器"}},[e._v("#")]),e._v(" 使用布隆过滤器")])])]),e._v(" "),v("p",[e._v("在Redis中安装布隆过滤器的步骤是：")]),e._v(" "),v("p",[e._v("1、拉取"),v("code",[e._v("redislabs/rebloom")]),e._v("镜像，它包含了Redis和布隆过滤器")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" pull redislabs/rebloom:latest\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("p",[e._v("2、创建并运行容器")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-d")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("6379")]),e._v(":6379 "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-v")]),e._v(" /mydata/redis-redisbloom/data:/data "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--name")]),e._v(" redis-redisbloom "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--restart")]),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("always "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\nredislabs/rebloom:latest\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br"),v("span",{staticClass:"line-number"},[e._v("5")]),v("br")])]),v("p",[e._v("3、使用客户端连接服务端")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exec")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-it")]),e._v(" redis-redisbloom redis-cli\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("p"),e._v(" "),v("p",[e._v("安装好布隆过滤器后，就可以通过Redis命令使用它了，常见的命令有：")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th",[e._v("关于布隆过滤器的Redis命令")]),e._v(" "),v("th",[e._v("介绍")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[v("code",[e._v("BF.MADD filter value1 value2 value3")])]),e._v(" "),v("td",[e._v("向布隆过滤器"),v("code",[e._v("filter")]),e._v("中添加元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("BF.MEXISTS filter value1 value2")])]),e._v(" "),v("td",[e._v("判断布隆过滤器"),v("code",[e._v("filter")]),e._v("中是否存在指定的元素")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("BF.RESERVE filter error_rate capacity [EXPANSION expansion] [NONSCALING]")])]),e._v(" "),v("td",[e._v("设置布隆过滤器的参数")])])])]),e._v(" "),v("h2",{attrs:{id:"四、发布订阅"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#四、发布订阅"}},[e._v("#")]),e._v(" 四、发布订阅")]),e._v(" "),v("p",[e._v("Redis的PubSub模块是它的发布订阅模块，发布订阅实现了消息多播功能。客户端之间通过channel来传递消息，一个客户端可以订阅任意个channel。它的常用命令如下：")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th",[e._v("发布订阅的相关命令")]),e._v(" "),v("th",[e._v("介绍")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[v("code",[e._v("SUBSCRIBE channel1 channel2")])]),e._v(" "),v("td",[e._v("客户端订阅多个频道，执行该命令后客户端会进入阻塞状态，等待服务端向频道发布消息，然后接收消息")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("PUBLISH channel1 hello")])]),e._v(" "),v("td",[e._v("服务端向频道发布消息")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("PSUBSCRIBE abc* def*")])]),e._v(" "),v("td",[e._v("客户端订阅符合某种正则表达式的频道")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("UNSUBSCRIBE channel1 channel2")])]),e._v(" "),v("td",[e._v("客户端退订频道")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("PUBSUB CHANNELS")])]),e._v(" "),v("td",[e._v("查询所有在线的频道，如果有客户端正在订阅一个频道，那么这个频道就是在线的")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("PUBSUB NUMPAT")])]),e._v(" "),v("td",[e._v("查询所有在线的正则表达式类型的频道数量")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("PUBSUB NUMSUB channel1")])]),e._v(" "),v("td",[e._v("查询正在订阅某个频道的客户端的数量")])])])]),e._v(" "),v("h2",{attrs:{id:"五、事务"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#五、事务"}},[e._v("#")]),e._v(" 五、事务")]),e._v(" "),v("h3",{attrs:{id:"使用方法"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#使用方法"}},[e._v("#")]),e._v(" 使用方法")]),e._v(" "),v("p",[e._v("Redis事务的使用方法是：")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[e._v("MULTI "),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 开启事务")]),e._v("\nSET name jack\nSET age "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("18")]),e._v("\nEXEC "),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 执行事务中的所有命令")]),e._v("\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br")])]),v("p",[e._v("开启事务后也可以不执行命令，相当于MySQL中的回滚：")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[e._v("MULTI "),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 开启事务")]),e._v("\nSET name jack\nSET age "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("18")]),e._v("\nDISCARD "),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 取消执行事务中的所有命令")]),e._v("\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br")])]),v("h3",{attrs:{id:"原子性"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#原子性"}},[e._v("#")]),e._v(" 原子性")]),e._v(" "),v("p",[e._v("Redis单条命令是原子性的，而Redis事务不是原子性的，在一个Redis事务中如果有一条命令执行失败，不会影响其它正常命令的执行。")]),e._v(" "),v("h3",{attrs:{id:"线程安全"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#线程安全"}},[e._v("#")]),e._v(" 线程安全")]),e._v(" "),v("p",[e._v("可以使用乐观锁来实现Redis中共享变量的线程安全。具体做法是先监视这个共享变量，然后开启事务，如果该变量在事务执行的过程中被其它客户端修改了，该事务中的所有命令都不会执行。如下所示：")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[e._v("WATCH age "),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 监视共享变量age")]),e._v("\nMULTI "),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 开始事务")]),e._v("\nSET age "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("18")]),e._v("\nEXEC "),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 当age被其它客户端修改了，不会执行事务中的命令")]),e._v("\nUNWATCH "),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 取消监视")]),e._v("\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br"),v("span",{staticClass:"line-number"},[e._v("5")]),v("br")])]),v("h2",{attrs:{id:"六、数据持久化"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#六、数据持久化"}},[e._v("#")]),e._v(" 六、数据持久化")]),e._v(" "),v("h3",{attrs:{id:"概述"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[e._v("#")]),e._v(" 概述")]),e._v(" "),v("p",[e._v("Redis是基于内存的数据库，它会把全部数据放在内存中，如果服务器突然宕机会导致数据丢失，因此需要有一种持久化机制将内存数据保存到本地磁盘中。Redis提供了两种持久化机制："),v("code",[e._v("RDB")]),e._v("和"),v("code",[e._v("AOF")]),e._v("，当服务器恢复时，会通过磁盘中的持久化文件恢复数据。")]),e._v(" "),v("h3",{attrs:{id:"rdb"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#rdb"}},[e._v("#")]),e._v(" RDB")]),e._v(" "),v("ul",[v("li",[v("h4",{attrs:{id:"简介"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[e._v("#")]),e._v(" 简介")])])]),e._v(" "),v("p",[v("code",[e._v("RDB(Redis DataBase)")]),e._v("，即将数据作为数据库文件保存在本地，它是默认的持久化机制。RDB会将数据保存在"),v("code",[e._v("dump.rdb")]),e._v("这个二进制文件中。RDB可以手动触发，也可以自动触发。")]),e._v(" "),v("ul",[v("li",[v("h4",{attrs:{id:"触发策略"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#触发策略"}},[e._v("#")]),e._v(" 触发策略")])])]),e._v(" "),v("p",[e._v("手动触发的命令是"),v("code",[e._v("SAVE")]),e._v("或"),v("code",[e._v("BGSAVE")]),e._v("，不建议使用"),v("code",[e._v("SAVE")]),e._v("命令，因为会导致当前客户端阻塞，而"),v("code",[e._v("BGSAVE")]),e._v("命令会在后台执行，不影响当前客户端。")]),e._v(" "),v("p",[e._v("自动触发需要在"),v("code",[e._v("redis.conf")]),e._v("配置文件中设置，设置方法如下：")]),e._v(" "),v("div",{staticClass:"language-conf line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("save 60 2 # 在60秒内只要发生了2次修改操作，就会触发RDB持久化。\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("h3",{attrs:{id:"aof"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#aof"}},[e._v("#")]),e._v(" AOF")]),e._v(" "),v("ul",[v("li",[v("h4",{attrs:{id:"简介-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#简介-2"}},[e._v("#")]),e._v(" 简介")])])]),e._v(" "),v("p",[v("code",[e._v("AOF(Append Only File)")]),e._v("，即追加模式，服务器执行修改命令之前，如果命令有效，就会将命令写入"),v("code",[e._v("appendonly.aof")]),e._v("文件，然后再执行命令，当恢复数据时，只需要把文件中的所有命令重新执行一遍。AOF默认关闭，需要在"),v("code",[e._v("redis.conf")]),e._v("中开启：")]),e._v(" "),v("div",{staticClass:"language-conf line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("appendonly yes\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("ul",[v("li",[v("h4",{attrs:{id:"aof重写"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#aof重写"}},[e._v("#")]),e._v(" AOF重写")])])]),e._v(" "),v("p",[e._v("当"),v("code",[e._v("appendonly.aof")]),e._v("越来越大时，需要对它进行”瘦身“，这个过程叫做AOF重写。如果需要手动重写，执行下面的命令即可：")]),e._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[e._v("BGREWRITEAOF\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br")])]),v("p",[e._v("也可以在"),v("code",[e._v("redis.conf")]),e._v("配置文件中配置自动重写策略：")]),e._v(" "),v("div",{staticClass:"language-conf line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("auto-aof-rewrite-percentage 100 # 当aof文件增量大于100%时触发重写\nauto-aof-rewrite-min-size 64mb # 当aof文件增量大于64MB时触发重写\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br")])]),v("ul",[v("li",[v("h4",{attrs:{id:"触发策略-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#触发策略-2"}},[e._v("#")]),e._v(" 触发策略")])])]),e._v(" "),v("p",[e._v("AOF触发策略")]),e._v(" "),v("p",[e._v("服务器宕机时，丢失命令的数量取决于命令被写入aof文件的时间，越早把数据写入文件，丢失的数据就越少。Redis为AOF提供了3种触发策略：")]),e._v(" "),v("p",[v("strong",[e._v("1、"),v("code",[e._v("always")])]),e._v("：每执行一次命令，就把命令写入aof文件。优点是不会丢失任何数据，缺点是执行速度太慢。")]),e._v(" "),v("p",[v("strong",[e._v("2、"),v("code",[e._v("everysec")])]),e._v("：默认策略，每秒向aof文件中写入一次命令。最多会丢失一秒内的数据。")]),e._v(" "),v("p",[v("strong",[e._v("3、"),v("code",[e._v("no")])]),e._v("：由操作系统决定何时向aof文件写入命令。这种策略不安全。")]),e._v(" "),v("p",[e._v("可以在"),v("code",[e._v("redis.conf")]),e._v("文件中配置AOF触发策略：")]),e._v(" "),v("div",{staticClass:"language-conf line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("appendfsync always\nappendfsync everysec\nappendfsync no\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br")])]),v("h3",{attrs:{id:"rdb和aof的对比"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#rdb和aof的对比"}},[e._v("#")]),e._v(" RDB和AOF的对比")]),e._v(" "),v("p",[e._v("RDB和AOF的区别如下：")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th"),e._v(" "),v("th",[e._v("RDB")]),e._v(" "),v("th",[e._v("AOF")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[e._v("备份速度")]),e._v(" "),v("td",[e._v("慢")]),e._v(" "),v("td",[e._v("快")])]),e._v(" "),v("tr",[v("td",[e._v("恢复速度")]),e._v(" "),v("td",[e._v("快")]),e._v(" "),v("td",[e._v("慢")])]),e._v(" "),v("tr",[v("td",[e._v("数据安全性")]),e._v(" "),v("td",[e._v("低")]),e._v(" "),v("td",[e._v("高")])])])]),e._v(" "),v("p",[e._v("RDB之所以比AOF备份速度慢，是因为AOF只需要保存命令；之所以比AOF恢复速度快，是因为AOF需要执行命令；之所以比AOF安全性低，是因为备份速度慢，数据容易丢失。")])])}),[],!1,null,null,null);v.default=_.exports}}]);